{%- comment -%}
  Heading Block - Legacy Theme Block

  Simple heading block for backward compatibility with older themes.
  Basic functionality without advanced features.

  Usage: Add this block to any section that accepts @theme blocks
  Copy to: /blocks/heading.liquid in your theme
{%- endcomment -%}

{%- liquid
  # Generate unique ID for CSS scoping
  assign unique = block.id | replace: '_', '' | downcase

  # Heading settings
  assign heading = block.settings.heading | default: 'Heading Text'
  assign heading_tag = block.settings.heading_tag | default: 'h2'
  assign alignment = block.settings.alignment | default: 'left'
  assign text_color = block.settings.text_color
-%}

{%- comment -%} CSS Scoping and Styles {%- endcomment -%}
<style>
  .heading-block-{{ unique }} {
    text-align: {{ alignment }};
    margin: 0;
    padding: 10px 0;
  }

  .heading-block-{{ unique }}__text {
    {% if text_color != blank %}
      color: {{ text_color }};
    {% endif %}
    margin: 0;
    line-height: 1.3;
  }

  h1.heading-block-{{ unique }}__text {
    font-size: 36px;
    font-weight: 700;
  }

  h2.heading-block-{{ unique }}__text {
    font-size: 28px;
    font-weight: 600;
  }

  h3.heading-block-{{ unique }}__text {
    font-size: 24px;
    font-weight: 600;
  }

  h4.heading-block-{{ unique }}__text {
    font-size: 20px;
    font-weight: 500;
  }

  h5.heading-block-{{ unique }}__text {
    font-size: 18px;
    font-weight: 500;
  }

  h6.heading-block-{{ unique }}__text {
    font-size: 16px;
    font-weight: 500;
  }

  @media screen and (max-width: 749px) {
    h1.heading-block-{{ unique }}__text { font-size: 28px; }
    h2.heading-block-{{ unique }}__text { font-size: 24px; }
    h3.heading-block-{{ unique }}__text { font-size: 20px; }
    h4.heading-block-{{ unique }}__text { font-size: 18px; }
    h5.heading-block-{{ unique }}__text { font-size: 16px; }
    h6.heading-block-{{ unique }}__text { font-size: 14px; }
  }
</style>

{%- comment -%} HTML Structure {%- endcomment -%}
<div class="heading-block-{{ unique }}" {{ block.shopify_attributes }}>
  <{{ heading_tag }} class="heading-block-{{ unique }}__text">
    {{ heading | escape }}
  </{{ heading_tag }}>
</div>

{% schema %}
{
  "name": "Heading",
  "class": "heading-block",
  "tag": "div",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Heading Text"
    },
    {
      "type": "select",
      "id": "heading_tag",
      "label": "Heading level",
      "options": [
        {"value": "h1", "label": "H1"},
        {"value": "h2", "label": "H2"},
        {"value": "h3", "label": "H3"},
        {"value": "h4", "label": "H4"},
        {"value": "h5", "label": "H5"},
        {"value": "h6", "label": "H6"}
      ],
      "default": "h2"
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Text alignment",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "center", "label": "Center"},
        {"value": "right", "label": "Right"}
      ],
      "default": "left"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color"
    }
  ],
  "presets": [
    {
      "name": "Heading"
    }
  ]
}
{% endschema %}
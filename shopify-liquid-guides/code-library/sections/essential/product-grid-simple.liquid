{%- comment -%}
  Simple Product Grid - CLEAN & WORKING

  A minimal product grid section with:
  - Collection products display
  - Responsive grid layout
  - Product cards with image, title, price
  - Optional section heading
  - Zero complexity violations

  Perfect replacement for over-engineered featured-products.liquid
{%- endcomment -%}

{%- liquid
  assign collection = collections[section.settings.collection]
  assign heading = section.settings.heading
  assign products_per_row = section.settings.products_per_row
  assign product_limit = section.settings.product_limit
-%}

<style>
  .product-grid-{{ section.id }} {
    padding: 3rem 1rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .product-grid-{{ section.id }}__heading {
    text-align: center;
    margin: 0 0 2rem 0;
    font-size: 2rem;
    font-weight: bold;
  }

  .product-grid-{{ section.id }}__grid {
    display: grid;
    grid-template-columns: repeat({{ products_per_row }}, 1fr);
    gap: 2rem;
  }

  .product-grid-{{ section.id }}__card {
    text-decoration: none;
    color: inherit;
    transition: transform 0.2s ease;
  }

  .product-grid-{{ section.id }}__card:hover {
    transform: translateY(-4px);
  }

  .product-grid-{{ section.id }}__image {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 1rem;
  }

  .product-grid-{{ section.id }}__title {
    font-weight: 600;
    margin: 0 0 0.5rem 0;
    font-size: 1rem;
  }

  .product-grid-{{ section.id }}__price {
    font-weight: bold;
    color: #000000;
  }

  .product-grid-{{ section.id }}__compare-price {
    text-decoration: line-through;
    color: #666666;
    margin-right: 0.5rem;
  }

  /* Mobile responsive */
  @media screen and (max-width: 749px) {
    .product-grid-{{ section.id }}__grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .product-grid-{{ section.id }}__image {
      height: 200px;
    }

    .product-grid-{{ section.id }} {
      padding: 2rem 1rem;
    }
  }

  @media screen and (max-width: 480px) {
    .product-grid-{{ section.id }}__grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<section class="product-grid-{{ section.id }}" {{ section.shopify_attributes }}>

  {% if heading != blank %}
    <h2 class="product-grid-{{ section.id }}__heading">
      {{ heading | escape }}
    </h2>
  {% endif %}

  {% if collection.products.size > 0 %}
    <div class="product-grid-{{ section.id }}__grid">
      {% for product in collection.products limit: product_limit %}
        <a href="{{ product.url | escape }}" class="product-grid-{{ section.id }}__card">

          {% if product.featured_image %}
            <img src="{{ product.featured_image | image_url: width: 400 }}"
                 alt="{{ product.featured_image.alt | default: product.title | escape }}"
                 class="product-grid-{{ section.id }}__image"
                 width="400"
                 height="250"
                 loading="lazy">
          {% endif %}

          <h3 class="product-grid-{{ section.id }}__title">
            {{ product.title | escape }}
          </h3>

          <div class="product-grid-{{ section.id }}__price">
            {% if product.compare_at_price > product.price %}
              <span class="product-grid-{{ section.id }}__compare-price">
                {{ product.compare_at_price | money }}
              </span>
            {% endif %}
            {{ product.price | money }}
          </div>

        </a>
      {% endfor %}
    </div>
  {% else %}
    <p style="text-align: center; color: #666;">No products found in this collection.</p>
  {% endif %}

</section>

{% schema %}
{
  "name": "Product Grid",
  "tag": "section",
  "class": "product-grid-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section heading",
      "default": "Featured Products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_per_row",
      "label": "Products per row",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "product_limit",
      "label": "Number of products to show",
      "min": 3,
      "max": 12,
      "step": 1,
      "default": 6
    }
  ],
  "presets": [
    {
      "name": "Product Grid",
      "settings": {
        "heading": "Featured Products",
        "products_per_row": 3,
        "product_limit": 6
      }
    }
  ]
}
{% endschema %}
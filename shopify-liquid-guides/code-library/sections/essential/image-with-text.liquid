{%- comment -%}
  Image with Text Section - CLEAN & WORKING

  Simple two-column layout with:
  - Image on one side, content on the other
  - Flexible layout (image left/right)
  - Responsive mobile stacking
  - Single text block and button
  - Zero complexity violations

  Perfect replacement for the 1472-line over-engineered monster
{%- endcomment -%}

{%- liquid
  assign image = section.settings.image
  assign heading = section.settings.heading
  assign text = section.settings.text
  assign button_text = section.settings.button_text
  assign button_url = section.settings.button_url
  assign layout = section.settings.layout
-%}

<style>
  .image-text-{{ section.id }} {
    padding: 3rem 1rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .image-text-{{ section.id }}__grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
    {% if layout == 'text_first' %}
      direction: rtl;
    {% endif %}
  }

  .image-text-{{ section.id }}__image-wrapper {
    {% if layout == 'text_first' %}
      direction: ltr;
    {% endif %}
  }

  .image-text-{{ section.id }}__image {
    width: 100%;
    height: auto;
    border-radius: 8px;
  }

  .image-text-{{ section.id }}__content {
    {% if layout == 'text_first' %}
      direction: ltr;
    {% endif %}
  }

  .image-text-{{ section.id }}__heading {
    font-size: 2rem;
    font-weight: bold;
    margin: 0 0 1rem 0;
    line-height: 1.2;
  }

  .image-text-{{ section.id }}__text {
    color: #666;
    line-height: 1.6;
    margin: 0 0 1.5rem 0;
  }

  .image-text-{{ section.id }}__button {
    display: inline-block;
    background-color: #000;
    color: #fff;
    padding: 12px 24px;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }

  .image-text-{{ section.id }}__button:hover {
    background-color: #333;
  }

  /* Mobile responsive */
  @media screen and (max-width: 749px) {
    .image-text-{{ section.id }}__grid {
      grid-template-columns: 1fr;
      gap: 2rem;
      direction: ltr;
    }

    .image-text-{{ section.id }}__content {
      order: 2;
      text-align: center;
      direction: ltr;
    }

    .image-text-{{ section.id }}__image-wrapper {
      order: 1;
      direction: ltr;
    }

    {% if layout == 'text_first' %}
      .image-text-{{ section.id }}__content {
        order: 1;
      }

      .image-text-{{ section.id }}__image-wrapper {
        order: 2;
      }
    {% endif %}

    .image-text-{{ section.id }}__heading {
      font-size: 1.75rem;
    }

    .image-text-{{ section.id }} {
      padding: 2rem 1rem;
    }
  }
</style>

<section class="image-text-{{ section.id }}" {{ section.shopify_attributes }}>
  <div class="image-text-{{ section.id }}__grid">

    <div class="image-text-{{ section.id }}__image-wrapper">
      {% if image %}
        <img src="{{ image | image_url: width: 600 }}"
             alt="{{ image.alt | default: heading | escape }}"
             class="image-text-{{ section.id }}__image"
             width="600"
             height="400"
             loading="lazy">
      {% else %}
        <div style="background: #f5f5f5; aspect-ratio: 3/2; display: flex; align-items: center; justify-content: center; border-radius: 8px; color: #999;">
          <span>Image placeholder</span>
        </div>
      {% endif %}
    </div>

    <div class="image-text-{{ section.id }}__content">
      {% if heading != blank %}
        <h2 class="image-text-{{ section.id }}__heading">
          {{ heading | escape }}
        </h2>
      {% endif %}

      {% if text != blank %}
        <div class="image-text-{{ section.id }}__text">
          {{ text }}
        </div>
      {% endif %}

      {% if button_text != blank and button_url != blank %}
        <a href="{{ button_url }}" class="image-text-{{ section.id }}__button">
          {{ button_text | escape }}
        </a>
      {% endif %}
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Image with Text",
  "tag": "section",
  "class": "image-text-section",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Image with Text"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>Pair large text with an image to give focus to your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout",
      "options": [
        {
          "value": "image_first",
          "label": "Image left, text right"
        },
        {
          "value": "text_first",
          "label": "Text left, image right"
        }
      ],
      "default": "image_first"
    }
  ],
  "presets": [
    {
      "name": "Image with Text",
      "settings": {
        "heading": "Image with Text",
        "text": "<p>Pair large text with an image to give focus to your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>",
        "button_text": "Learn More"
      }
    }
  ]
}
{% endschema %}
{%- comment -%}
  Feature-rich Hero Section with Rich Text and CTA

  Advanced hero section with block support, rich text content,
  multiple CTAs, and comprehensive customization options.
{%- endcomment -%}

{%- liquid
  # Generate unique ID for CSS scoping
  assign unique = section.id | replace: '_', '' | downcase

  # Section settings
  assign background_color = section.settings.background_color | default: '#ffffff'
  assign text_color = section.settings.text_color | default: '#333333'
  assign content_alignment = section.settings.content_alignment | default: 'center'
  assign background_image = section.settings.background_image
  assign image_overlay = section.settings.image_overlay | default: 0
-%}

{%- comment -%} CSS Scoping and Styles {%- endcomment -%}
{% style %}
  .hero-richtext-{{ unique }} {
    background-color: {{ background_color }};
    color: {{ text_color }};
    padding: {{ section.settings.padding_top | default: 80 }}px 0 {{ section.settings.padding_bottom | default: 80 }}px;
    position: relative;
    overflow: hidden;
    min-height: {{ section.settings.min_height | default: 500 }}px;
    display: flex;
    align-items: center;
    contain: layout style;
  }

  .hero-richtext-{{ unique }}.has-background-image {
    background-image: url('{{ background_image | image_url: width: 1920 }}');
    background-size: cover;
    background-position: {{ section.settings.image_position | default: 'center center' }};
    background-repeat: no-repeat;
    background-attachment: {{ section.settings.image_attachment | default: 'scroll' }};
  }

  .hero-richtext-{{ unique }}__overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, {{ image_overlay | divided_by: 100.0 }});
    pointer-events: none;
  }

  .hero-richtext-{{ unique }}__container {
    max-width: {{ section.settings.container_width | default: 1200 }}px;
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 1;
    width: 100%;
  }

  .hero-richtext-{{ unique }}__content {
    max-width: {{ section.settings.content_width | default: 800 }}px;
    {% if content_alignment == 'left' %}
      margin-right: auto;
    {% elsif content_alignment == 'right' %}
      margin-left: auto;
    {% else %}
      margin: 0 auto;
    {% endif %}
    text-align: {{ content_alignment }};
  }

  .hero-richtext-{{ unique }}__blocks {
    display: flex;
    flex-direction: column;
    gap: {{ section.settings.block_spacing | default: 30 }}px;
  }

  .hero-richtext-{{ unique }}__block {
    animation: fadeInUp 0.6s ease-out;
    animation-fill-mode: both;
  }

  .hero-richtext-{{ unique }}__block:nth-child(1) { animation-delay: 0.1s; }
  .hero-richtext-{{ unique }}__block:nth-child(2) { animation-delay: 0.2s; }
  .hero-richtext-{{ unique }}__block:nth-child(3) { animation-delay: 0.3s; }
  .hero-richtext-{{ unique }}__block:nth-child(4) { animation-delay: 0.4s; }

  .hero-richtext-{{ unique }}__heading {
    font-size: {{ section.settings.heading_size | default: 56 }}px;
    font-weight: {{ section.settings.heading_weight | default: 700 }};
    line-height: {{ section.settings.heading_line_height | default: 1.1 }};
    margin: 0;
    color: inherit;
    letter-spacing: {{ section.settings.heading_letter_spacing | default: '-0.02em' }};
  }

  .hero-richtext-{{ unique }}__richtext {
    font-size: {{ section.settings.text_size | default: 20 }}px;
    line-height: {{ section.settings.text_line_height | default: 1.6 }};
    margin: 0;
    opacity: {{ section.settings.text_opacity | default: 90 | divided_by: 100.0 }};
  }

  .hero-richtext-{{ unique }}__richtext p {
    margin: 0 0 1em 0;
  }

  .hero-richtext-{{ unique }}__richtext p:last-child {
    margin-bottom: 0;
  }

  .hero-richtext-{{ unique }}__buttons {
    display: flex;
    gap: {{ section.settings.button_spacing | default: 16 }}px;
    flex-wrap: wrap;
    {% if content_alignment == 'center' %}
      justify-content: center;
    {% elsif content_alignment == 'right' %}
      justify-content: flex-end;
    {% else %}
      justify-content: flex-start;
    {% endif %}
  }

  .hero-richtext-{{ unique }}__button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: {{ section.settings.button_padding | default: '16px 32px' }};
    font-size: {{ section.settings.button_size | default: 18 }}px;
    font-weight: 600;
    text-decoration: none;
    border-radius: {{ section.settings.button_radius | default: 6 }}px;
    transition: all 0.3s ease;
    min-height: 50px;
    min-width: 50px;
    border: 2px solid transparent;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  .hero-richtext-{{ unique }}__button--primary {
    background: {{ section.settings.primary_button_bg | default: '#007cba' }};
    color: {{ section.settings.primary_button_color | default: '#ffffff' }};
    border-color: {{ section.settings.primary_button_bg | default: '#007cba' }};
  }

  .hero-richtext-{{ unique }}__button--primary:hover {
    background: {{ section.settings.primary_button_hover | default: '#005a9e' }};
    border-color: {{ section.settings.primary_button_hover | default: '#005a9e' }};
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 124, 186, 0.3);
  }

  .hero-richtext-{{ unique }}__button--secondary {
    background: transparent;
    color: {{ section.settings.secondary_button_color | default: text_color }};
    border-color: {{ section.settings.secondary_button_color | default: text_color }};
  }

  .hero-richtext-{{ unique }}__button--secondary:hover {
    background: {{ section.settings.secondary_button_color | default: text_color }};
    color: {{ background_color }};
  }

  .hero-richtext-{{ unique }}__button:focus {
    outline: 2px solid {{ section.settings.focus_color | default: '#007cba' }};
    outline-offset: 2px;
  }

  .hero-richtext-{{ unique }}__icon {
    width: 20px;
    height: 20px;
    margin-left: 8px;
    transition: transform 0.3s ease;
  }

  .hero-richtext-{{ unique }}__button:hover .hero-richtext-{{ unique }}__icon {
    transform: translateX(4px);
  }

  /* Mobile Responsive */
  @media screen and (max-width: 749px) {
    .hero-richtext-{{ unique }} {
      padding: {{ section.settings.padding_top_mobile | default: 50 }}px 0 {{ section.settings.padding_bottom_mobile | default: 50 }}px;
      min-height: {{ section.settings.min_height_mobile | default: 400 }}px;
      text-align: center;
    }

    .hero-richtext-{{ unique }}__container {
      padding: 0 16px;
    }

    .hero-richtext-{{ unique }}__content {
      max-width: 100%;
      margin: 0 auto;
    }

    .hero-richtext-{{ unique }}__heading {
      font-size: {{ section.settings.heading_size_mobile | default: 36 }}px;
    }

    .hero-richtext-{{ unique }}__richtext {
      font-size: {{ section.settings.text_size_mobile | default: 18 }}px;
    }

    .hero-richtext-{{ unique }}__buttons {
      flex-direction: column;
      align-items: center;
    }

    .hero-richtext-{{ unique }}__button {
      width: 100%;
      max-width: 300px;
    }

    .hero-richtext-{{ unique }}__blocks {
      gap: {{ section.settings.block_spacing_mobile | default: 20 }}px;
    }
  }

  /* Animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .hero-richtext-{{ unique }}__block {
      animation: none;
    }

    .hero-richtext-{{ unique }}__button {
      transition: none;
    }

    .hero-richtext-{{ unique }}__button:hover {
      transform: none;
      box-shadow: none;
    }

    .hero-richtext-{{ unique }}__button:hover .hero-richtext-{{ unique }}__icon {
      transform: none;
    }
  }
{% endstyle %}

{%- comment -%} HTML Structure {%- endcomment -%}
<section
  class="hero-richtext-{{ unique }}{% if background_image %} has-background-image{% endif %}"
  aria-labelledby="hero-heading-{{ unique }}"
  role="banner"
>
  {%- if background_image and image_overlay > 0 -%}
    <div class="hero-richtext-{{ unique }}__overlay"></div>
  {%- endif -%}

  <div class="hero-richtext-{{ unique }}__container">
    <div class="hero-richtext-{{ unique }}__content">
      <div class="hero-richtext-{{ unique }}__blocks">
        {%- for block in section.blocks -%}
          <div class="hero-richtext-{{ unique }}__block" {{ block.shopify_attributes }}>
            {%- case block.type -%}
              {%- when 'heading' -%}
                {%- if block.settings.heading != blank -%}
                  <h1 class="hero-richtext-{{ unique }}__heading" id="hero-heading-{{ unique }}">
                    {{ block.settings.heading | escape }}
                  </h1>
                {%- endif -%}

              {%- when 'richtext' -%}
                {%- if block.settings.text != blank -%}
                  <div class="hero-richtext-{{ unique }}__richtext">
                    {{ block.settings.text }}
                  </div>
                {%- endif -%}

              {%- when 'buttons' -%}
                {%- if block.settings.button_text_1 != blank or block.settings.button_text_2 != blank -%}
                  <div class="hero-richtext-{{ unique }}__buttons">
                    {%- if block.settings.button_text_1 != blank and block.settings.button_url_1 != blank -%}
                      <a
                        href="{{ block.settings.button_url_1 }}"
                        class="hero-richtext-{{ unique }}__button hero-richtext-{{ unique }}__button--primary"
                        {% if block.settings.button_url_1 contains 'http' %}target="_blank" rel="noopener"{% endif %}
                      >
                        {{ block.settings.button_text_1 | escape }}
                        {%- if block.settings.show_arrow_1 -%}
                          <svg class="hero-richtext-{{ unique }}__icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                          </svg>
                        {%- endif -%}
                      </a>
                    {%- endif -%}

                    {%- if block.settings.button_text_2 != blank and block.settings.button_url_2 != blank -%}
                      <a
                        href="{{ block.settings.button_url_2 }}"
                        class="hero-richtext-{{ unique }}__button hero-richtext-{{ unique }}__button--secondary"
                        {% if block.settings.button_url_2 contains 'http' %}target="_blank" rel="noopener"{% endif %}
                      >
                        {{ block.settings.button_text_2 | escape }}
                        {%- if block.settings.show_arrow_2 -%}
                          <svg class="hero-richtext-{{ unique }}__icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                          </svg>
                        {%- endif -%}
                      </a>
                    {%- endif -%}
                  </div>
                {%- endif -%}
            {%- endcase -%}
          </div>
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>

{%- comment -%} Schema Configuration {%- endcomment -%}
{% schema %}
{
  "name": "Hero Rich Text CTA",
  "tag": "section",
  "class": "hero-richtext-section",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "min_height",
      "label": "Minimum Height (Desktop)",
      "min": 300,
      "max": 900,
      "step": 50,
      "unit": "px",
      "default": 500
    },
    {
      "type": "range",
      "id": "min_height_mobile",
      "label": "Minimum Height (Mobile)",
      "min": 250,
      "max": 700,
      "step": 50,
      "unit": "px",
      "default": 400
    },
    {
      "type": "range",
      "id": "container_width",
      "label": "Container Width",
      "min": 800,
      "max": 1400,
      "step": 50,
      "unit": "px",
      "default": 1200
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "Content Width",
      "min": 600,
      "max": 1000,
      "step": 50,
      "unit": "px",
      "default": 800
    },
    {
      "type": "header",
      "content": "Background Settings"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        {
          "value": "top center",
          "label": "Top Center"
        },
        {
          "value": "center center",
          "label": "Center Center"
        },
        {
          "value": "bottom center",
          "label": "Bottom Center"
        }
      ],
      "default": "center center"
    },
    {
      "type": "select",
      "id": "image_attachment",
      "label": "Image Attachment",
      "options": [
        {
          "value": "scroll",
          "label": "Scroll"
        },
        {
          "value": "fixed",
          "label": "Fixed (Parallax)"
        }
      ],
      "default": "scroll"
    },
    {
      "type": "range",
      "id": "image_overlay",
      "label": "Image Overlay Opacity",
      "min": 0,
      "max": 90,
      "step": 10,
      "unit": "%",
      "default": 0
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "heading_size",
      "label": "Heading Size (Desktop)",
      "min": 32,
      "max": 80,
      "step": 4,
      "unit": "px",
      "default": 56
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "label": "Heading Size (Mobile)",
      "min": 24,
      "max": 48,
      "step": 4,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Text Size (Desktop)",
      "min": 16,
      "max": 28,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "range",
      "id": "text_size_mobile",
      "label": "Text Size (Mobile)",
      "min": 14,
      "max": 22,
      "step": 2,
      "unit": "px",
      "default": 18
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top Padding (Desktop)",
      "min": 20,
      "max": 150,
      "step": 10,
      "unit": "px",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom Padding (Desktop)",
      "min": 20,
      "max": 150,
      "step": 10,
      "unit": "px",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Top Padding (Mobile)",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "px",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Bottom Padding (Mobile)",
      "min": 20,
      "max": 100,
      "step": 10,
      "unit": "px",
      "default": 50
    },
    {
      "type": "range",
      "id": "block_spacing",
      "label": "Block Spacing (Desktop)",
      "min": 20,
      "max": 60,
      "step": 10,
      "unit": "px",
      "default": 30
    },
    {
      "type": "range",
      "id": "block_spacing_mobile",
      "label": "Block Spacing (Mobile)",
      "min": 15,
      "max": 40,
      "step": 5,
      "unit": "px",
      "default": 20
    },
    {
      "type": "header",
      "content": "Button Colors"
    },
    {
      "type": "color",
      "id": "primary_button_bg",
      "label": "Primary Button Background",
      "default": "#007cba"
    },
    {
      "type": "color",
      "id": "primary_button_color",
      "label": "Primary Button Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "primary_button_hover",
      "label": "Primary Button Hover",
      "default": "#005a9e"
    },
    {
      "type": "color",
      "id": "secondary_button_color",
      "label": "Secondary Button Color",
      "default": "#333333"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Create Amazing Experiences"
        }
      ]
    },
    {
      "type": "richtext",
      "name": "Rich Text",
      "limit": 3,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Transform your business with our innovative solutions designed to drive growth and enhance customer satisfaction.</p>"
        }
      ]
    },
    {
      "type": "buttons",
      "name": "Button Group",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_text_1",
          "label": "Primary Button Text",
          "default": "Get Started"
        },
        {
          "type": "url",
          "id": "button_url_1",
          "label": "Primary Button URL"
        },
        {
          "type": "checkbox",
          "id": "show_arrow_1",
          "label": "Show Arrow on Primary Button",
          "default": true
        },
        {
          "type": "text",
          "id": "button_text_2",
          "label": "Secondary Button Text",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "button_url_2",
          "label": "Secondary Button URL"
        },
        {
          "type": "checkbox",
          "id": "show_arrow_2",
          "label": "Show Arrow on Secondary Button",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hero Rich Text CTA",
      "blocks": [
        {
          "type": "heading",
          "settings": {
            "heading": "Create Amazing Experiences"
          }
        },
        {
          "type": "richtext",
          "settings": {
            "text": "<p>Transform your business with our innovative solutions designed to drive growth and enhance customer satisfaction.</p>"
          }
        },
        {
          "type": "buttons",
          "settings": {
            "button_text_1": "Get Started",
            "button_text_2": "Learn More"
          }
        }
      ]
    }
  ]
}
{% endschema %}